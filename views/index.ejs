<!DOCTYPE html>
<html>
<head>
  <title>FarmaTop</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
  <link rel="stylesheet" href="/css/index.css">
</head>
<body>
  <h1>Lista de Remédios</h1>
  <ul>
    <% remedios.forEach(remedio => { %>
      <li><%= remedio.nome %></li>
      <ul><%= remedio.foto %></ul>
      <ul><%= remedio.descricao %></ul>
      <ul><%= remedio.indicacao %></ul>
      <ul><%= remedio.modoDeUsar %></ul>
      <ul><%= remedio.efeitosColaterais %></ul>
    <% }); %>
  </ul>
  <a href="/formulario">Cadastrar Novo Remédio</a>
  <button onclick="editarRemedio('<%= remedio.id %>')">Editar</button>
  <button onclick="excluirRemedio('<%= remedio.id %>')">Excluir</button>

  <script>
    function editarRemedio(remedioId) {
      window.location.href = `/formulario/${remedioId}`;
    }
  
    function excluirRemedio(remedioId) {
      fetch(`/excluir-remedio/${remedioId}`, {
        method: 'DELETE',
      })
        .then(response => response.json())
        .then(data => {
          if (data.success) {
            window.location.reload();
          } else {
            console.error('Erro 1 ao excluir o remédio:', data.error);
          }
        })
        .catch(error => {
          console.error('Erro 2 ao excluir o remédio:', error);
        });
    }
  </script>

</body>
</html>
